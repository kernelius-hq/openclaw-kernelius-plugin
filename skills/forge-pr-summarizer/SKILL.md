---
name: forge-pr-summarizer
description: "Generate summaries for Kernelius Forge pull requests. Triggered by pr.created or pr.merged webhooks. Create changelogs, release notes, and PR descriptions. Use when needing to summarize PR changes."
metadata:
  {
    "openclaw":
      {
        "emoji": "üìù",
        "requires": { "channels": ["kernelius"], "bins": ["forge"] },
      },
  }
---

# Forge PR Summarizer

Generate clear, helpful summaries for pull requests. Create changelogs, release notes, and improve PR descriptions.

## Webhook Triggers

- `pr.created` - Summarize new PRs
- `pr.merged` - Generate changelog entries

## Summary Workflow

### 1. Gather PR Information

```bash
# Get PR details
forge prs view --repo @owner/repo --number 10

# Get the diff
forge prs diff --repo @owner/repo --number 10

# Get commits
forge prs commits --repo @owner/repo --number 10
```

### 2. Analyze Changes

Categorize changes:
- **Features** - New functionality
- **Fixes** - Bug fixes
- **Refactoring** - Code improvements without behavior change
- **Docs** - Documentation updates
- **Tests** - Test additions/modifications
- **Chores** - Dependencies, config, tooling

### 3. Generate Summary

Post summary as a comment:

```
action: send
to: repo:owner/name:pr:10
message: |
  ## PR Summary

  {Generated summary}
```

## Summary Templates

### PR Description Enhancement

```markdown
## Summary
{One-line summary of what this PR does}

## Changes
- {Change 1}
- {Change 2}
- {Change 3}

## Type
- [ ] Feature
- [ ] Bug fix
- [ ] Refactor
- [ ] Documentation
- [ ] Test
- [ ] Chore

## Testing
{How to test these changes}

## Screenshots
{If applicable}

---
üìù Summary by OpenClaw
```

### Changelog Entry (for merged PRs)

```markdown
## Changelog Entry

### {Version or Date}

#### Added
- {New feature from this PR}

#### Changed
- {Modified behavior}

#### Fixed
- {Bug that was fixed}

#### Removed
- {Deprecated features removed}

---
üìù Generated by OpenClaw
```

### Release Notes

```markdown
## Release Notes

### {Feature/Fix Title}

{User-facing description of the change}

**What's new:**
- {Benefit 1}
- {Benefit 2}

**Migration notes:**
{If any breaking changes or migration steps needed}

---
üìù Generated by OpenClaw
```

### Technical Summary

```markdown
## Technical Summary

### Files Changed
| File | Changes |
|------|---------|
| `{path}` | {description} |

### Key Changes

#### {Component 1}
{Technical details of changes}

#### {Component 2}
{Technical details of changes}

### Dependencies
- Added: {new deps}
- Removed: {removed deps}
- Updated: {updated deps}

### Database Changes
{If any schema changes}

### API Changes
{If any endpoint changes}

---
üìù Generated by OpenClaw
```

## Commit Message Analysis

Parse commit messages to understand changes:

```
feat: Add user authentication
^     ^
|     |__ Description
|__ Type
```

Common prefixes:
- `feat:` - New feature
- `fix:` - Bug fix
- `docs:` - Documentation
- `style:` - Formatting
- `refactor:` - Code restructuring
- `test:` - Tests
- `chore:` - Maintenance

## Best Practices

1. **User-focused language** - Explain what users get, not just what code changed
2. **Be concise** - Summarize, don't repeat the entire diff
3. **Highlight breaking changes** - Make them prominent
4. **Group related changes** - Organize by feature/component
5. **Link to issues** - Reference related issues/discussions
6. **Include context** - Why was this change made?

## Reactions

Acknowledge you're generating a summary:
```
action: react
messageId: pr:{pr-id}
emoji: eyes
```

After posting summary:
```
action: react
messageId: pr:{pr-id}
emoji: rocket
```
